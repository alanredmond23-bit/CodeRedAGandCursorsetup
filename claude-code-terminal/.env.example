# ============================================================================
# CLAUDE CODE TERMINAL - ENVIRONMENT VARIABLES
# Legal Discovery Multi-Agent System Configuration
# ============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to '.env' in the same directory
# 2. Fill in all required credentials
# 3. NEVER commit .env to version control (already in .gitignore)
# 4. Rotate credentials every 90 days for security
#
# SECURITY NOTES:
# - Store this file securely (encrypted disk, password manager)
# - Use service accounts with minimum required permissions
# - Enable 2FA where available
# - Monitor audit logs for unauthorized access
#
# ============================================================================

# ----------------------------------------------------------------------------
# ATTORNEY CONFIGURATION
# ----------------------------------------------------------------------------
ATTORNEY_EMAIL=alan.redmond@law.com
ATTORNEY_NAME="Alan Redmond"
LAW_FIRM_NAME="Redmond Legal"
PRACTICE_JURISDICTION="California"

# ----------------------------------------------------------------------------
# WESTLAW API CREDENTIALS
# ----------------------------------------------------------------------------
# Obtain from: https://developer.westlaw.com/
# Required for: @discovery mode - case law research
# Permissions needed: Search, KeyCite, Headnotes
WESTLAW_API_KEY=your_westlaw_api_key_here
WESTLAW_API_SECRET=your_westlaw_api_secret_here
WESTLAW_ENDPOINT=https://api.westlaw.com/v1

# Optional: Westlaw Edge API (if available)
WESTLAW_EDGE_API_KEY=
WESTLAW_EDGE_ENDPOINT=

# ----------------------------------------------------------------------------
# LEXISNEXIS API CREDENTIALS
# ----------------------------------------------------------------------------
# Obtain from: https://developer.lexisnexis.com/
# Required for: @discovery mode - statute/regulation research
# Permissions needed: Search, Shepardize, Annotations
LEXIS_CLIENT_ID=your_lexis_client_id_here
LEXIS_CLIENT_SECRET=your_lexis_client_secret_here
LEXIS_ENDPOINT=https://api.lexisnexis.com/v2
LEXIS_AUTH_URL=https://auth.lexisnexis.com/oauth2/token

# Optional: LexisNexis for Microsoft Office integration
LEXIS_OFFICE_API_KEY=

# ----------------------------------------------------------------------------
# GMAIL API CREDENTIALS
# ----------------------------------------------------------------------------
# Obtain from: https://console.cloud.google.com/apis/credentials
# Required for: @discovery mode - email discovery
# Scopes needed: gmail.readonly, gmail.modify
#
# SETUP INSTRUCTIONS:
# 1. Create OAuth 2.0 Client ID in Google Cloud Console
# 2. Download credentials JSON
# 3. Run initial authentication to generate token
# 4. Store credentials and token paths here

GMAIL_CREDENTIALS_JSON=/path/to/gmail_credentials.json
GMAIL_TOKEN_JSON=/path/to/gmail_token.json
GMAIL_SCOPES=https://www.googleapis.com/auth/gmail.readonly,https://www.googleapis.com/auth/gmail.modify

# Primary mailbox to search
GMAIL_PRIMARY_EMAIL=alan.redmond@law.com

# Additional mailboxes (comma-separated)
GMAIL_ADDITIONAL_EMAILS=paralegal@law.com,discovery@law.com

# ----------------------------------------------------------------------------
# SLACK API CREDENTIALS
# ----------------------------------------------------------------------------
# Obtain from: https://api.slack.com/apps
# Required for: @discovery mode - internal communication discovery
# Scopes needed: channels:history, search:read, files:read
#
# SETUP INSTRUCTIONS:
# 1. Create Slack App at api.slack.com/apps
# 2. Install to workspace
# 3. Copy Bot User OAuth Token
# 4. Copy App-Level Token (for socket mode)

SLACK_BOT_TOKEN=xoxb-your-bot-token-here
SLACK_APP_TOKEN=xapp-your-app-token-here
SLACK_WORKSPACE_ID=your-workspace-id

# Channels to monitor (comma-separated, supports wildcards)
SLACK_LEGAL_CHANNELS=#legal-team,#case-*,#strategy-*

# ----------------------------------------------------------------------------
# SUPABASE CREDENTIALS
# ----------------------------------------------------------------------------
# Obtain from: https://app.supabase.com/project/_/settings/api
# Required for: All modes - case database, RAG, session management
# Permissions needed: Full database access, storage access
#
# SETUP INSTRUCTIONS:
# 1. Create Supabase project at supabase.com
# 2. Copy Project URL and API Keys from Settings > API
# 3. Run database migration scripts (see README)
# 4. Enable pgvector extension for vector search

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# Database configuration
SUPABASE_DB_POOL_SIZE=10
SUPABASE_DB_MAX_OVERFLOW=20

# Storage bucket for documents
SUPABASE_STORAGE_BUCKET=case-documents

# ----------------------------------------------------------------------------
# OPENAI API CREDENTIALS
# ----------------------------------------------------------------------------
# Obtain from: https://platform.openai.com/api-keys
# Required for: RAG embeddings, semantic search
# Permissions needed: Embeddings API access
#
# NOTE: Only used for embeddings (text-embedding-ada-002)
# NOT used for chat completion (Claude handles that)

OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=org-your-organization-id

# Model configuration
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_MAX_TOKENS=8191

# ----------------------------------------------------------------------------
# GOOGLE DRIVE (OPTIONAL)
# ----------------------------------------------------------------------------
# Obtain from: https://console.cloud.google.com/apis/credentials
# Optional for: Document storage and retrieval
# Scopes needed: drive.readonly

GDRIVE_CREDENTIALS_JSON=/path/to/gdrive_credentials.json
GDRIVE_TOKEN_JSON=/path/to/gdrive_token.json
GDRIVE_SCOPES=https://www.googleapis.com/auth/drive.readonly

# Shared drive or folder ID (optional)
GDRIVE_FOLDER_ID=

# ----------------------------------------------------------------------------
# LOGGING & DEBUGGING
# ----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
LOG_FILE=claude-code-terminal.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=10

# Enable verbose debugging for specific modules
DEBUG_MCP_CONNECTIONS=false
DEBUG_PRIVILEGE_DETECTION=false
DEBUG_CONTEXT_INJECTION=true

# ----------------------------------------------------------------------------
# SESSION MANAGEMENT
# ----------------------------------------------------------------------------
# Session checkpoint configuration
SESSION_CHECKPOINT_FILE=session-checkpoint.json
SESSION_AUTO_SAVE=true
SESSION_SAVE_INTERVAL_MINUTES=15
SESSION_MAX_HISTORY_ITEMS=100

# ----------------------------------------------------------------------------
# PRIVILEGE DETECTION
# ----------------------------------------------------------------------------
# Attorney email domains (comma-separated)
ATTORNEY_DOMAINS=law.com,legalfirm.com,attorney.com

# Client email domains (comma-separated)
CLIENT_DOMAINS=techcorp.com,startupco.com,client.com

# Auto-flag emails between attorney and client domains
AUTO_FLAG_ATTORNEY_CLIENT=true

# Privilege sensitivity: LOW, MEDIUM, HIGH, STRICT
PRIVILEGE_SENSITIVITY=HIGH

# Quarantine privileged documents automatically
AUTO_QUARANTINE_PRIVILEGED=true

# ----------------------------------------------------------------------------
# AUDIT TRAIL
# ----------------------------------------------------------------------------
# Audit log configuration
AUDIT_ENABLED=true
AUDIT_LOG_FILE=audit-trail.log
AUDIT_RETENTION_DAYS=2555  # 7 years
AUDIT_LOG_LEVEL=COMPREHENSIVE

# Events to audit (comma-separated)
AUDIT_EVENTS=mcp_connection,mcp_query,privilege_flag,document_access,mode_invocation,session_checkpoint

# ----------------------------------------------------------------------------
# PERFORMANCE & CACHING
# ----------------------------------------------------------------------------
# Cache configuration
CACHE_ENABLED=true
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE_MB=500

# Parallel MCP calls
PARALLEL_MCP_CALLS=true
MAX_PARALLEL_CALLS=5

# Request batching
REQUEST_BATCHING=true
BATCH_SIZE=10

# ----------------------------------------------------------------------------
# SECURITY
# ----------------------------------------------------------------------------
# Encryption settings
ENCRYPT_AT_REST=true
ENCRYPT_IN_TRANSIT=true

# Credential rotation reminder (days)
CREDENTIAL_ROTATION_DAYS=90

# IP whitelist (optional, comma-separated)
IP_WHITELIST_ENABLED=false
IP_WHITELIST=

# ----------------------------------------------------------------------------
# RATE LIMITING
# ----------------------------------------------------------------------------
# Global rate limits (to avoid API quota exhaustion)
WESTLAW_QUERIES_PER_HOUR=100
LEXIS_QUERIES_PER_HOUR=50
GMAIL_QUERIES_PER_SECOND=250
SLACK_REQUESTS_PER_MINUTE=20

# Auto-throttle when approaching limits
AUTO_THROTTLE=true
THROTTLE_THRESHOLD_PERCENT=80

# ----------------------------------------------------------------------------
# ERROR HANDLING
# ----------------------------------------------------------------------------
# Retry policy
MAX_RETRIES=3
RETRY_BACKOFF=exponential
INITIAL_RETRY_DELAY_MS=1000

# Failure modes
MCP_FAILURE_MODE=DEGRADED  # DEGRADED or ABORT
NOTIFY_ON_FAILURE=true

# ----------------------------------------------------------------------------
# LEGAL COMPLIANCE
# ----------------------------------------------------------------------------
# Jurisdiction and ethical rules
JURISDICTION=California
ETHICAL_RULES=ABA Model Rules,California Rules of Professional Conduct

# Data retention
DATA_RETENTION_YEARS=7

# Privilege protection level
PRIVILEGE_PROTECTION=STRICT  # LOW, MEDIUM, HIGH, STRICT

# Require attorney supervision
ATTORNEY_SUPERVISION_REQUIRED=true

# ----------------------------------------------------------------------------
# DEVELOPMENT & TESTING
# ----------------------------------------------------------------------------
# Development mode (enables additional logging, disables some safety checks)
DEV_MODE=false

# Test mode (uses test credentials and sandbox environments)
TEST_MODE=false

# Mock MCP responses (for testing without live API calls)
MOCK_MCPS=false

# ----------------------------------------------------------------------------
# NOTIFICATIONS
# ----------------------------------------------------------------------------
# Email notifications for critical events
NOTIFICATIONS_ENABLED=true
NOTIFICATION_EMAIL=alan.redmond@law.com

# Slack notifications (optional)
SLACK_NOTIFICATIONS_ENABLED=false
SLACK_NOTIFICATION_WEBHOOK=

# SMS notifications (optional, via Twilio)
SMS_NOTIFICATIONS_ENABLED=false
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM_NUMBER=
TWILIO_TO_NUMBER=

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
#
# VERIFICATION CHECKLIST:
# [ ] All required credentials filled in
# [ ] File permissions set to 600 (readable only by owner)
# [ ] .gitignore contains .env
# [ ] Credentials tested and working
# [ ] Backup stored securely
# [ ] Calendar reminder set for credential rotation
#
# SUPPORT:
# For issues or questions, contact: alan.redmond@law.com
#
# ============================================================================
